---
- hosts: 127.0.0.1
  connection: local

  tasks:
  - name: Get appliance files
    shell: ls /usr/share/ovirt-engine-appliance
    register: appliance_name
    when: true
    ignore_errors: true
  - debug: msg={{ appliance_name.stdout_lines | to_json }}

  - name: Get CPU model
    shell: virsh -r capabilities | grep -m 1 "<model>"
    register: cpu_model
    when: true
    ignore_errors: true
  - debug: msg={{ cpu_model | to_json }}

  - name: Get CPU vendor
    shell: virsh -r capabilities | grep -m 1 "<vendor>"
    register: cpu_vendor
    when: true
    ignore_errors: true
  - debug: msg={{ cpu_vendor | to_json }}
